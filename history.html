<!-- history.html -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Transaction History â€” Afaq Shahb Investment Plan</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body{background:#0b1b2a;color:#eef2f6}
  .navbar{background:#0f5132}
  .card{background:#101828;border-radius:12px}
  .status-pending{color:#fbbf24;font-weight:700}
  .status-completed{color:#22c55e;font-weight:700}
  .btn-complete{background:#22c55e;border:none}
  .btn-complete:hover{background:#16a34a}
  .btn-clear{border-color:#ef4444;color:#ef4444}
  .btn-clear:hover{background:#ef4444;color:#fff}
</style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark">
  <div class="container">
    <a class="navbar-brand fw-bold" href="index.html">Afaq Shahb Investment Plan</a>
  </div>
</nav>

<main class="container py-4">
  <h2 class="mb-3">Transaction History (Demo)</h2>

  <div class="card p-3 mb-3">
    <div class="d-flex flex-wrap gap-2">
      <button class="btn btn-complete btn-sm" onclick="markSelectedComplete()">Mark Selected as Completed</button>
      <button class="btn btn-outline-light btn-sm" onclick="reload()">Refresh</button>
      <button class="btn btn-clear btn-sm" onclick="clearAll()">Clear All</button>
    </div>
  </div>

  <div class="card p-0">
    <div class="table-responsive">
      <table class="table table-dark table-striped table-hover mb-0 align-middle">
        <thead>
          <tr>
            <th style="width:40px"><input type="checkbox" onclick="toggleAll(this)"></th>
            <th>Type</th>
            <th>Plan</th>
            <th>Amount (Rs)</th>
            <th>Method</th>
            <th>To/Wallet</th>
            <th>TX ID</th>
            <th>Status</th>
            <th>Time</th>
          </tr>
        </thead>
        <tbody id="rows"></tbody>
      </table>
    </div>
  </div>
</main>

<a href="https://wa.me/923260357695" target="_blank" class="position-fixed text-decoration-none fw-bold"
   style="right:20px;bottom:20px;background:#25D366;color:#fff;padding:12px 18px;border-radius:999px;box-shadow:0 6px 16px rgba(0,0,0,.35);">
  ðŸ’¬ WhatsApp
</a>

<script>
function load(){
  const list=JSON.parse(localStorage.getItem('tx')||'[]');
  const tb=document.getElementById('rows'); tb.innerHTML='';
  list.forEach((r,i)=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`
      <td><input type="checkbox" data-i="${i}"></td>
      <td>${r.type||''}</td>
      <td>${r.plan||''}</td>
      <td>${r.amount??''}</td>
      <td>${r.method||''}</td>
      <td>${r.to||''}</td>
      <td>${r.txid||''}</td>
      <td class="${r.status==='Completed'?'status-completed':'status-pending'}">${r.status}</td>
      <td>${new Date(r.time).toLocaleString()}</td>`;
    tb.appendChild(tr);
  });
}
function toggleAll(src){document.querySelectorAll('#rows input[type=checkbox]').forEach(c=>c.checked=src.checked)}
function markSelectedComplete(){
  const list=JSON.parse(localStorage.getItem('tx')||'[]');
  document.querySelectorAll('#rows input[type=checkbox]:checked').forEach(c=>{
    const i=+c.getAttribute('data-i'); if(list[i]) list[i].status='Completed';
  });
  localStorage.setItem('tx',JSON.stringify(list));
  load();
}
function reload(){load()}
function clearAll(){ if(confirm('Clear all history?')){localStorage.removeItem('tx'); load();} }
load();
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
